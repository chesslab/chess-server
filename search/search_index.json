{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"PHP Chess Server PHP Chess Server is an asynchronous PHP server that provides functionality to play chess online over a WebSocket connection as well as over a TCP connection. Similar to the Chess API , it can be hosted on a custom domain. However, while the API endpoints may take few seconds to execute \u2014 for example, a file download or a database query \u2014 the event-driven, non-blocking architecture of the chess server allows to handle multiple concurrent connections in an efficient way. The chess commands are intended to run very quickly almost in real-time. Object-Oriented The socket, the game modes and the chess commands are all implemented using OOP principles. Lightweight Dependencies required: PHP Chess for chess functionality. Ratchet for asynchronously serving WebSockets. PHP-JWT for encoding and decoding JSON Web Tokens (JWT). PHP dotenv for loading environment variables. Monolog for logging commands.","title":"Home"},{"location":"#php-chess-server","text":"PHP Chess Server is an asynchronous PHP server that provides functionality to play chess online over a WebSocket connection as well as over a TCP connection. Similar to the Chess API , it can be hosted on a custom domain. However, while the API endpoints may take few seconds to execute \u2014 for example, a file download or a database query \u2014 the event-driven, non-blocking architecture of the chess server allows to handle multiple concurrent connections in an efficient way. The chess commands are intended to run very quickly almost in real-time.","title":"PHP Chess Server"},{"location":"#object-oriented","text":"The socket, the game modes and the chess commands are all implemented using OOP principles.","title":"Object-Oriented"},{"location":"#lightweight","text":"Dependencies required: PHP Chess for chess functionality. Ratchet for asynchronously serving WebSockets. PHP-JWT for encoding and decoding JSON Web Tokens (JWT). PHP dotenv for loading environment variables. Monolog for logging commands.","title":"Lightweight"},{"location":"accept/","text":"/accept Accepts an invitation to play online with an opponent. Name Description Required hash The unique hash of the game. Yes Usage Example ws.send('/accept 15f78c0035a719491b89522b4905a490'); { \"/accept\": { \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwY2hlc3MubmV0IiwiaWF0IjoxNjk0NDQxOTcxLCJleHAiOjE2OTQ0NDU1NzEsInZhcmlhbnQiOiJjbGFzc2ljYWwiLCJzdWJtb2RlIjoiZnJpZW5kIiwiY29sb3IiOiJ3IiwibWluIjo1LCJpbmNyZW1lbnQiOjMsImZlbiI6InJuYnFrYm5yL3BwcHBwcHBwLzgvOC84LzgvUFBQUFBQUFAvUk5CUUtCTlIgdyBLUWtxIC0ifQ.POuK_cR3U_bblLa8LFyGg1AJEE5_iW_AquuNn7K4qHI\", \"hash\": \"15f78c0035a719491b89522b4905a490\", \"timer\": { \"w\": 300, \"b\": 300 }, \"startedAt\": 1694441992 } }","title":"/accept"},{"location":"accept/#accept","text":"Accepts an invitation to play online with an opponent. Name Description Required hash The unique hash of the game. Yes","title":"/accept"},{"location":"accept/#usage","text":"","title":"Usage"},{"location":"accept/#example","text":"ws.send('/accept 15f78c0035a719491b89522b4905a490'); { \"/accept\": { \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwY2hlc3MubmV0IiwiaWF0IjoxNjk0NDQxOTcxLCJleHAiOjE2OTQ0NDU1NzEsInZhcmlhbnQiOiJjbGFzc2ljYWwiLCJzdWJtb2RlIjoiZnJpZW5kIiwiY29sb3IiOiJ3IiwibWluIjo1LCJpbmNyZW1lbnQiOjMsImZlbiI6InJuYnFrYm5yL3BwcHBwcHBwLzgvOC84LzgvUFBQUFBQUFAvUk5CUUtCTlIgdyBLUWtxIC0ifQ.POuK_cR3U_bblLa8LFyGg1AJEE5_iW_AquuNn7K4qHI\", \"hash\": \"15f78c0035a719491b89522b4905a490\", \"timer\": { \"w\": 300, \"b\": 300 }, \"startedAt\": 1694441992 } }","title":"Example"},{"location":"draw/","text":"/draw Allows to offer a draw. Name Description Required action propose decline accept Yes Usage Propose a draw ws.send('/draw propose'); { \"/draw\": { \"action\": \"propose\" } } Decline a draw ws.send('/draw decline'); { \"/draw\": { \"action\": \"decline\" } } Accept a draw ws.send('/draw accept'); { \"/takeback\": { \"action\": \"accept\" } }","title":"/draw"},{"location":"draw/#draw","text":"Allows to offer a draw. Name Description Required action propose decline accept Yes","title":"/draw"},{"location":"draw/#usage","text":"","title":"Usage"},{"location":"draw/#propose-a-draw","text":"ws.send('/draw propose'); { \"/draw\": { \"action\": \"propose\" } }","title":"Propose a draw"},{"location":"draw/#decline-a-draw","text":"ws.send('/draw decline'); { \"/draw\": { \"action\": \"decline\" } }","title":"Decline a draw"},{"location":"draw/#accept-a-draw","text":"ws.send('/draw accept'); { \"/takeback\": { \"action\": \"accept\" } }","title":"Accept a draw"},{"location":"getting-started/","text":"Getting Started Probably the easiest way to get familiar with the chess commands is by reading the WebSocket messages sent back and forth between the web browser and the chess server as you interact with a web app. To do this, you may want to use the React Chess application as shown in the example below. Figure 1 . Open Google Chrome developer tools for command examples. Figure 2 . As chess moves are played, the chess server response is displayed on the Network > WS > Messages tab. Also a WebSocket connection with the chess server can be opened in the JavaScript console. const ws = new WebSocket('wss://async.chesslablab.org:8443'); That's it! Now you're set up to start playing chess. ws.send('/start classical fen'); The /start command above starts a new classical chess game and retrieves a JSON response from the server. { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\" } } On successful server response a FEN string representing the starting position is returned as well as the chess variant and the game mode. This is the classical starting position in FEN format. Let's make the very first move. What about 1.e4? This is the so-called King's Pawn Game, one of the most popular chess openings, in Portable Game Notation (PGN) format. Humans can understand chess games in PGN easily but this format is not that great for computers as well as for graphic user interfaces (GUI) which may prefer the Long Algebraic Notation (LAN) format instead. Let's play 1.e4 in LAN format. ws.send('/play_lan w e2e4'); The /play_lan command above retrieves the following JSON response. { \"/play_lan\": { \"turn\": \"b\", \"pgn\": \"e4\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4\", \"fen\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } } A popular response to 1.e4 is 1...e5 which in LAN format is e7e5. ws.send('/play_lan b e7e5'); Once again the /play_lan command makes a chess move, this time retrieving the following JSON response. { \"/play_lan\": { \"turn\": \"w\", \"pgn\": \"e5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 e5\", \"fen\": \"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } } Let's recap. Described below is the series of steps required to start a classical chess game with 1.e4 e5. Remember, computers and graphic user interfaces (GUIs) usually prefer the Long Algebraic Notation (LAN) format instead: e2e4 and e7e5. const ws = new WebSocket('wss://async.chesslablab.org:8443'); ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); ws.send('/play_lan b e7e5'); Now let's have a look at the WebSocket commands available! The list of commands could have been sorted in alphabetical order but it is more convenient to begin with the /start command and continue in a way that's easier to understand.","title":"Getting Started"},{"location":"getting-started/#getting-started","text":"Probably the easiest way to get familiar with the chess commands is by reading the WebSocket messages sent back and forth between the web browser and the chess server as you interact with a web app. To do this, you may want to use the React Chess application as shown in the example below. Figure 1 . Open Google Chrome developer tools for command examples. Figure 2 . As chess moves are played, the chess server response is displayed on the Network > WS > Messages tab. Also a WebSocket connection with the chess server can be opened in the JavaScript console. const ws = new WebSocket('wss://async.chesslablab.org:8443'); That's it! Now you're set up to start playing chess. ws.send('/start classical fen'); The /start command above starts a new classical chess game and retrieves a JSON response from the server. { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\" } } On successful server response a FEN string representing the starting position is returned as well as the chess variant and the game mode. This is the classical starting position in FEN format. Let's make the very first move. What about 1.e4? This is the so-called King's Pawn Game, one of the most popular chess openings, in Portable Game Notation (PGN) format. Humans can understand chess games in PGN easily but this format is not that great for computers as well as for graphic user interfaces (GUI) which may prefer the Long Algebraic Notation (LAN) format instead. Let's play 1.e4 in LAN format. ws.send('/play_lan w e2e4'); The /play_lan command above retrieves the following JSON response. { \"/play_lan\": { \"turn\": \"b\", \"pgn\": \"e4\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4\", \"fen\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } } A popular response to 1.e4 is 1...e5 which in LAN format is e7e5. ws.send('/play_lan b e7e5'); Once again the /play_lan command makes a chess move, this time retrieving the following JSON response. { \"/play_lan\": { \"turn\": \"w\", \"pgn\": \"e5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 e5\", \"fen\": \"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } } Let's recap. Described below is the series of steps required to start a classical chess game with 1.e4 e5. Remember, computers and graphic user interfaces (GUIs) usually prefer the Long Algebraic Notation (LAN) format instead: e2e4 and e7e5. const ws = new WebSocket('wss://async.chesslablab.org:8443'); ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); ws.send('/play_lan b e7e5'); Now let's have a look at the WebSocket commands available! The list of commands could have been sorted in alphabetical order but it is more convenient to begin with the /start command and continue in a way that's easier to understand.","title":"Getting Started"},{"location":"heuristics/","text":"/heuristics Returns the heuristics of a chess position. Name Description Required fen A FEN string. Yes variant 960 capablanca capablanca-fischer classical Yes Usage Example ws.send('/start classical fen'); ws.send('/heuristics \"rnbqkb1r/p1pp1ppp/1p2pn2/8/2PP4/2N2N2/PP2PPPP/R1BQKB1R b KQkq -\" classical'); { \"/heuristics\": { \"names\": [ \"Material\", \"Center\", \"Connectivity\", \"Space\", \"Pressure\", \"King safety\", \"Protection\", \"Threat\", \"Attack\", \"Doubled pawn\", \"Passed pawn\", \"Advanced pawn\", \"Far-advanced pawn\", \"Isolated pawn\", \"Backward pawn\", \"Defense\", \"Absolute skewer\", \"Absolute pin\", \"Relative pin\", \"Absolute fork\", \"Relative fork\", \"Outpost square\", \"Knight outpost\", \"Bishop outpost\", \"Bishop pair\", \"Bad bishop\", \"Diagonal opposition\", \"Direct opposition\" ], \"balance\": [ 0, 12.4, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ] } }","title":"/heuristics"},{"location":"heuristics/#heuristics","text":"Returns the heuristics of a chess position. Name Description Required fen A FEN string. Yes variant 960 capablanca capablanca-fischer classical Yes","title":"/heuristics"},{"location":"heuristics/#usage","text":"","title":"Usage"},{"location":"heuristics/#example","text":"ws.send('/start classical fen'); ws.send('/heuristics \"rnbqkb1r/p1pp1ppp/1p2pn2/8/2PP4/2N2N2/PP2PPPP/R1BQKB1R b KQkq -\" classical'); { \"/heuristics\": { \"names\": [ \"Material\", \"Center\", \"Connectivity\", \"Space\", \"Pressure\", \"King safety\", \"Protection\", \"Threat\", \"Attack\", \"Doubled pawn\", \"Passed pawn\", \"Advanced pawn\", \"Far-advanced pawn\", \"Isolated pawn\", \"Backward pawn\", \"Defense\", \"Absolute skewer\", \"Absolute pin\", \"Relative pin\", \"Absolute fork\", \"Relative fork\", \"Outpost square\", \"Knight outpost\", \"Bishop outpost\", \"Bishop pair\", \"Bad bishop\", \"Diagonal opposition\", \"Direct opposition\" ], \"balance\": [ 0, 12.4, 0, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ] } }","title":"Example"},{"location":"installation/","text":"Installation Requirements PHP >= 8.1 You may want to optionally install Stockfish >= 15.1 as it is described in Play Computer . Setup Clone the chesslablab/chess-server repo into your projects folder as it is described in the following example: git clone git@github.com:chesslablab/chess-server.git Then cd the chess-server directory and install the Composer dependencies: composer install Create an .env file: cp .env.example .env Finally, you may want to add the following entry to your /etc/hosts file if running the PHP chess server on your localhost along with React Chess as per the REACT_APP_WS_HOST variable defined in the react-chess/.env.example file. 127.0.0.1 async.chesslablab.org Run the Chess Server The chess server comes in four different flavors and can be run using a PHP script. Script Description Use cli/testing.php TCP socket. Functional testing. cli/dev.php Simple WebSocket server. Development. cli/staging.php Secure WebSocket server. Staging. cli/prod.php Secure WebSocket server. Production. Functional Testing Run the TCP socket server. php cli/testing.php Simple WebSocket Server Run the simple WebSocket server if you are not using an SSL/TLS certificate. php cli/dev.php Staging Before starting the secure WebSocket server for the first time, make sure to have created the fullchain.pem and privkey.pem files into the ssl folder. Run the staging secure WebSocket server if you don't want to check the website's origin. php cli/staging.php This will allow any origin to send a request to it. Production Before starting the secure WebSocket server for the first time, make sure to have created the fullchain.pem and privkey.pem files into the ssl folder. Run the secure WebSocket server to check the website's origin as defined in the WSS_ALLOWED variable in the .env.example file. php cli/prod.php This will allow the WSS_ALLOWED website to send a request to it. Run the Chess Server on a Docker Container Alternatively, the chess server can run on a Docker container. Functional Testing docker compose -f docker-compose.testing.yml up -d Development docker compose -f docker-compose.dev.yml up -d Staging docker compose -f docker-compose.staging.yml up -d Production docker compose -f docker-compose.prod.yml up -d","title":"Installation"},{"location":"installation/#installation","text":"","title":"Installation"},{"location":"installation/#requirements","text":"PHP >= 8.1 You may want to optionally install Stockfish >= 15.1 as it is described in Play Computer .","title":"Requirements"},{"location":"installation/#setup","text":"Clone the chesslablab/chess-server repo into your projects folder as it is described in the following example: git clone git@github.com:chesslablab/chess-server.git Then cd the chess-server directory and install the Composer dependencies: composer install Create an .env file: cp .env.example .env Finally, you may want to add the following entry to your /etc/hosts file if running the PHP chess server on your localhost along with React Chess as per the REACT_APP_WS_HOST variable defined in the react-chess/.env.example file. 127.0.0.1 async.chesslablab.org","title":"Setup"},{"location":"installation/#run-the-chess-server","text":"The chess server comes in four different flavors and can be run using a PHP script. Script Description Use cli/testing.php TCP socket. Functional testing. cli/dev.php Simple WebSocket server. Development. cli/staging.php Secure WebSocket server. Staging. cli/prod.php Secure WebSocket server. Production.","title":"Run the Chess Server"},{"location":"installation/#functional-testing","text":"Run the TCP socket server. php cli/testing.php","title":"Functional Testing"},{"location":"installation/#simple-websocket-server","text":"Run the simple WebSocket server if you are not using an SSL/TLS certificate. php cli/dev.php","title":"Simple WebSocket Server"},{"location":"installation/#staging","text":"Before starting the secure WebSocket server for the first time, make sure to have created the fullchain.pem and privkey.pem files into the ssl folder. Run the staging secure WebSocket server if you don't want to check the website's origin. php cli/staging.php This will allow any origin to send a request to it.","title":"Staging"},{"location":"installation/#production","text":"Before starting the secure WebSocket server for the first time, make sure to have created the fullchain.pem and privkey.pem files into the ssl folder. Run the secure WebSocket server to check the website's origin as defined in the WSS_ALLOWED variable in the .env.example file. php cli/prod.php This will allow the WSS_ALLOWED website to send a request to it.","title":"Production"},{"location":"installation/#run-the-chess-server-on-a-docker-container","text":"Alternatively, the chess server can run on a Docker container.","title":"Run the Chess Server on a Docker Container"},{"location":"installation/#functional-testing_1","text":"docker compose -f docker-compose.testing.yml up -d","title":"Functional Testing"},{"location":"installation/#development","text":"docker compose -f docker-compose.dev.yml up -d","title":"Development"},{"location":"installation/#staging_1","text":"docker compose -f docker-compose.staging.yml up -d","title":"Staging"},{"location":"installation/#production_1","text":"docker compose -f docker-compose.prod.yml up -d","title":"Production"},{"location":"leave/","text":"/leave Allows to leave a game. Name Description Required action accept Yes Usage Example ws.send('/leave accept'); { \"/leave\": { \"action\": \"accept\" } }","title":"/leave"},{"location":"leave/#leave","text":"Allows to leave a game. Name Description Required action accept Yes","title":"/leave"},{"location":"leave/#usage","text":"","title":"Usage"},{"location":"leave/#example","text":"ws.send('/leave accept'); { \"/leave\": { \"action\": \"accept\" } }","title":"Example"},{"location":"legal/","text":"/legal Returns the legal FEN positions of a piece. Name Description Required position The location of the piece on the board. Yes Usage Example Start a classical game to find out the legal moves of the piece on e2. ws.send('/start classical fen'); ws.send('/legal e2'); { \"/legal\": { \"color\": \"w\", \"id\": \"P\", \"fen\": { \"e3\": \"rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR b KQkq -\", \"e4\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\" } } }","title":"/legal"},{"location":"legal/#legal","text":"Returns the legal FEN positions of a piece. Name Description Required position The location of the piece on the board. Yes","title":"/legal"},{"location":"legal/#usage","text":"","title":"Usage"},{"location":"legal/#example","text":"Start a classical game to find out the legal moves of the piece on e2. ws.send('/start classical fen'); ws.send('/legal e2'); { \"/legal\": { \"color\": \"w\", \"id\": \"P\", \"fen\": { \"e3\": \"rnbqkbnr/pppppppp/8/8/8/4P3/PPPP1PPP/RNBQKBNR b KQkq -\", \"e4\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\" } } }","title":"Example"},{"location":"online-games/","text":"/online_games Returns the online games waiting to be accepted. Usage Example ws.send('/online_games'); { \"/online_games\": [ { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983331, \"exp\": 1704986931, \"variant\": \"classical\", \"submode\": \"online\", \"color\": \"b\", \"min\": 5, \"increment\": 1, \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"hash\": \"84a4e20138e54e1869b9b79e7d3111f1\" }, { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983347, \"exp\": 1704986947, \"variant\": \"960\", \"submode\": \"online\", \"color\": \"w\", \"min\": 10, \"increment\": 5, \"fen\": \"bqrnnbkr/pppppppp/8/8/8/8/PPPPPPPP/BQRNNBKR w KQkq -\", \"startPos\": \"BQRNNBKR\", \"hash\": \"c6b79ac68055766c2a33364f69c72e4c\" }, { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983367, \"exp\": 1704986967, \"variant\": \"capablanca\", \"submode\": \"online\", \"color\": \"b\", \"min\": 30, \"increment\": 10, \"fen\": \"rnabqkbcnr/pppppppppp/10/10/10/10/PPPPPPPPPP/RNABQKBCNR w KQkq -\", \"hash\": \"076bafad0559def2db7866609680074c\" } ] }","title":"/online_games"},{"location":"online-games/#online_games","text":"Returns the online games waiting to be accepted.","title":"/online_games"},{"location":"online-games/#usage","text":"","title":"Usage"},{"location":"online-games/#example","text":"ws.send('/online_games'); { \"/online_games\": [ { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983331, \"exp\": 1704986931, \"variant\": \"classical\", \"submode\": \"online\", \"color\": \"b\", \"min\": 5, \"increment\": 1, \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"hash\": \"84a4e20138e54e1869b9b79e7d3111f1\" }, { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983347, \"exp\": 1704986947, \"variant\": \"960\", \"submode\": \"online\", \"color\": \"w\", \"min\": 10, \"increment\": 5, \"fen\": \"bqrnnbkr/pppppppp/8/8/8/8/PPPPPPPP/BQRNNBKR w KQkq -\", \"startPos\": \"BQRNNBKR\", \"hash\": \"c6b79ac68055766c2a33364f69c72e4c\" }, { \"iss\": \"async.chesslablab.org\", \"iat\": 1704983367, \"exp\": 1704986967, \"variant\": \"capablanca\", \"submode\": \"online\", \"color\": \"b\", \"min\": 30, \"increment\": 10, \"fen\": \"rnabqkbcnr/pppppppppp/10/10/10/10/PPPPPPPPPP/RNABQKBCNR w KQkq -\", \"hash\": \"076bafad0559def2db7866609680074c\" } ] }","title":"Example"},{"location":"play-lan/","text":"/play_lan Plays a chess move in long algebraic notation. Name Description Required color The player's turn. Yes lan The chess move in LAN format. Yes Usage Example Starts a classical game to play 1.e4. ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); { \"/play_lan\": { \"turn\": \"b\", \"pgn\": \"e4\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4\", \"fen\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } }","title":"/play_lan"},{"location":"play-lan/#play_lan","text":"Plays a chess move in long algebraic notation. Name Description Required color The player's turn. Yes lan The chess move in LAN format. Yes","title":"/play_lan"},{"location":"play-lan/#usage","text":"","title":"Usage"},{"location":"play-lan/#example","text":"Starts a classical game to play 1.e4. ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); { \"/play_lan\": { \"turn\": \"b\", \"pgn\": \"e4\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4\", \"fen\": \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } }","title":"Example"},{"location":"rematch/","text":"/rematch Allows to offer a rematch. Name Description Required action propose decline accept Yes Usage Propose a rematch ws.send('/rematch propose'); { \"/rematch\": { \"action\": \"propose\" } } Decline a rematch ws.send('/rematch decline'); { \"/rematch\": { \"action\": \"decline\" } } Accept a rematch ws.send('/rematch accept'); { \"/rematch\": { \"action\": \"accept\" } }","title":"/rematch"},{"location":"rematch/#rematch","text":"Allows to offer a rematch. Name Description Required action propose decline accept Yes","title":"/rematch"},{"location":"rematch/#usage","text":"","title":"Usage"},{"location":"rematch/#propose-a-rematch","text":"ws.send('/rematch propose'); { \"/rematch\": { \"action\": \"propose\" } }","title":"Propose a rematch"},{"location":"rematch/#decline-a-rematch","text":"ws.send('/rematch decline'); { \"/rematch\": { \"action\": \"decline\" } }","title":"Decline a rematch"},{"location":"rematch/#accept-a-rematch","text":"ws.send('/rematch accept'); { \"/rematch\": { \"action\": \"accept\" } }","title":"Accept a rematch"},{"location":"resign/","text":"/resign Allows to resign a game. Name Description Required action accept Yes Usage Example ws.send('/resign accept'); { \"/resign\": { \"action\": \"accept\" } }","title":"/resign"},{"location":"resign/#resign","text":"Allows to resign a game. Name Description Required action accept Yes","title":"/resign"},{"location":"resign/#usage","text":"","title":"Usage"},{"location":"resign/#example","text":"ws.send('/resign accept'); { \"/resign\": { \"action\": \"accept\" } }","title":"Example"},{"location":"restart/","text":"/restart Restarts an existing game. Name Description Required hash The unique hash of the game. Yes Usage Example ws.send('/restart ffc536a8f44fc21b4d254e4fb85d7e33'); { \"/restart\": { \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwY2hlc3MubmV0IiwiaWF0IjoxNjk0MTAxOTI2LCJleHAiOjE2OTQxMDU1MjYsInZhcmlhbnQiOiJjbGFzc2ljYWwiLCJzdWJtb2RlIjoib25saW5lIiwiY29sb3IiOiJ3IiwibWluIjo1LCJpbmNyZW1lbnQiOjMsImZlbiI6InJuYnFrYm5yL3BwcHBwcHBwLzgvOC84LzgvUFBQUFBQUFAvUk5CUUtCTlIgdyBLUWtxIC0ifQ.sE6Is9GYf0R6l0_C8rt7VPE8fVChsYlb9teEQw_2QUQ\", \"hash\": \"23bb4c7ec2e5a33f436b41376bb41064\", \"timer\": { \"w\": 300, \"b\": 300 } } }","title":"/restart"},{"location":"restart/#restart","text":"Restarts an existing game. Name Description Required hash The unique hash of the game. Yes","title":"/restart"},{"location":"restart/#usage","text":"","title":"Usage"},{"location":"restart/#example","text":"ws.send('/restart ffc536a8f44fc21b4d254e4fb85d7e33'); { \"/restart\": { \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJwY2hlc3MubmV0IiwiaWF0IjoxNjk0MTAxOTI2LCJleHAiOjE2OTQxMDU1MjYsInZhcmlhbnQiOiJjbGFzc2ljYWwiLCJzdWJtb2RlIjoib25saW5lIiwiY29sb3IiOiJ3IiwibWluIjo1LCJpbmNyZW1lbnQiOjMsImZlbiI6InJuYnFrYm5yL3BwcHBwcHBwLzgvOC84LzgvUFBQUFBQUFAvUk5CUUtCTlIgdyBLUWtxIC0ifQ.sE6Is9GYf0R6l0_C8rt7VPE8fVChsYlb9teEQw_2QUQ\", \"hash\": \"23bb4c7ec2e5a33f436b41376bb41064\", \"timer\": { \"w\": 300, \"b\": 300 } } }","title":"Example"},{"location":"start/","text":"/start Starts a new game. Name Description Required variant 960 capablanca capablanca-fischer classical Yes mode fen san play stockfish Yes add fen movetext startPos settings color Depends on the mode selected. Usage Start a classical game ws.send('/start classical fen'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\" } } Start a classical game from a FEN position Name Description Required add fen Yes ws.send('/start classical fen \"{\\\\\"fen\\\\\":\\\\\"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq d3\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq -\" } } Start a classical game from a SAN movetext Name Description Required add movetext Yes ws.send('/start classical san \"{\\\\\"movetext\\\\\":\\\\\"1.e4 Nc6 2.d4\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"san\", \"turn\": \"b\", \"movetext\": \"1.e4 Nc6 2.d4\", \"fen\": [ \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"r1bqkbnr/pppppppp/2n5/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq -\", \"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq d3\" ] } } Start a Chess960 game from a SAN movetext Name Description Required add movetext startPos Yes ws.send('/start 960 san \"{\\\\\"movetext\\\\\":\\\\\"1.e4 Nc6 2.d4\\\\\",\\\\\"startPos\\\\\":\\\\\"BNRKQBRN\\\\\"}\"'); { \"/start\": { \"variant\": \"960\", \"mode\": \"san\", \"turn\": \"b\", \"movetext\": \"1.e4 Nc6 2.d4\", \"fen\": [ \"bnrkqbrn/pppppppp/8/8/8/8/PPPPPPPP/BNRKQBRN w KQkq -\", \"bnrkqbrn/pppppppp/8/8/4P3/8/PPPP1PPP/BNRKQBRN b KQkq e3\", \"b1rkqbrn/pppppppp/2n5/8/4P3/8/PPPP1PPP/BNRKQBRN w KQkq -\", \"b1rkqbrn/pppppppp/2n5/8/3PP3/8/PPP2PPP/BNRKQBRN b KQkq d3\" ], \"startPos\": \"BNRKQBRN\" } } Start a classical game in Stockfish mode Name Description Required add color Yes ws.send('/start classical stockfish b'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"stockfish\", \"color\": \"b\" } } Start a classical game to play online ws.send('/start classical play {\"min\":5,\"increment\":3,\"color\":\"b\",\"submode\":\"online\"}'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"play\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjaGVzc2xhYmxhYi5uZXQiLCJpYXQiOjE3MDQ5ODM1NzUsImV4cCI6MTcwNDk4NzE3NSwidmFyaWFudCI6ImNsYXNzaWNhbCIsInN1Ym1vZGUiOiJvbmxpbmUiLCJjb2xvciI6ImIiLCJtaW4iOjUsImluY3JlbWVudCI6MywiZmVuIjoicm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSJ9.DMIDU7I52Reuz0VNHTXlGn6FLv3dc6KMEZRf9ephh1k\", \"hash\": \"3d5f1b067edae5a59a2a9595e96bde54\" } } Create an invite code to play a classical game Name Description Required add settings Yes ws.send('/start classical play \"{\\\\\"min\\\\\":5,\\\\\"increment\\\\\":3,\\\\\"color\\\\\":\\\\\"w\\\\\",\\\\\"submode\\\\\":\\\\\"friend\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"play\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjaGVzc2xhYmxhYi5uZXQiLCJpYXQiOjE3MDQ5NjYwNTMsImV4cCI6MTcwNDk2OTY1MywidmFyaWFudCI6ImNsYXNzaWNhbCIsInN1Ym1vZGUiOiJmcmllbmQiLCJjb2xvciI6InciLCJtaW4iOjUsImluY3JlbWVudCI6MywiZmVuIjoicm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSJ9._ehztodTLYkyovW82I1qyGdNkFwGFdTKn3O7EBr3cHo\", \"hash\": \"b4f1c0d0b28cad147968729f6bb76558\" } }","title":"/start"},{"location":"start/#start","text":"Starts a new game. Name Description Required variant 960 capablanca capablanca-fischer classical Yes mode fen san play stockfish Yes add fen movetext startPos settings color Depends on the mode selected.","title":"/start"},{"location":"start/#usage","text":"","title":"Usage"},{"location":"start/#start-a-classical-game","text":"ws.send('/start classical fen'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\" } }","title":"Start a classical game"},{"location":"start/#start-a-classical-game-from-a-fen-position","text":"Name Description Required add fen Yes ws.send('/start classical fen \"{\\\\\"fen\\\\\":\\\\\"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq d3\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"fen\", \"fen\": \"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq -\" } }","title":"Start a classical game from a FEN position"},{"location":"start/#start-a-classical-game-from-a-san-movetext","text":"Name Description Required add movetext Yes ws.send('/start classical san \"{\\\\\"movetext\\\\\":\\\\\"1.e4 Nc6 2.d4\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"san\", \"turn\": \"b\", \"movetext\": \"1.e4 Nc6 2.d4\", \"fen\": [ \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"rnbqkbnr/pppppppp/8/8/4P3/8/PPPP1PPP/RNBQKBNR b KQkq e3\", \"r1bqkbnr/pppppppp/2n5/8/4P3/8/PPPP1PPP/RNBQKBNR w KQkq -\", \"r1bqkbnr/pppppppp/2n5/8/3PP3/8/PPP2PPP/RNBQKBNR b KQkq d3\" ] } }","title":"Start a classical game from a SAN movetext"},{"location":"start/#start-a-chess960-game-from-a-san-movetext","text":"Name Description Required add movetext startPos Yes ws.send('/start 960 san \"{\\\\\"movetext\\\\\":\\\\\"1.e4 Nc6 2.d4\\\\\",\\\\\"startPos\\\\\":\\\\\"BNRKQBRN\\\\\"}\"'); { \"/start\": { \"variant\": \"960\", \"mode\": \"san\", \"turn\": \"b\", \"movetext\": \"1.e4 Nc6 2.d4\", \"fen\": [ \"bnrkqbrn/pppppppp/8/8/8/8/PPPPPPPP/BNRKQBRN w KQkq -\", \"bnrkqbrn/pppppppp/8/8/4P3/8/PPPP1PPP/BNRKQBRN b KQkq e3\", \"b1rkqbrn/pppppppp/2n5/8/4P3/8/PPPP1PPP/BNRKQBRN w KQkq -\", \"b1rkqbrn/pppppppp/2n5/8/3PP3/8/PPP2PPP/BNRKQBRN b KQkq d3\" ], \"startPos\": \"BNRKQBRN\" } }","title":"Start a Chess960 game from a SAN movetext"},{"location":"start/#start-a-classical-game-in-stockfish-mode","text":"Name Description Required add color Yes ws.send('/start classical stockfish b'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"stockfish\", \"color\": \"b\" } }","title":"Start a classical game in Stockfish mode"},{"location":"start/#start-a-classical-game-to-play-online","text":"ws.send('/start classical play {\"min\":5,\"increment\":3,\"color\":\"b\",\"submode\":\"online\"}'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"play\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjaGVzc2xhYmxhYi5uZXQiLCJpYXQiOjE3MDQ5ODM1NzUsImV4cCI6MTcwNDk4NzE3NSwidmFyaWFudCI6ImNsYXNzaWNhbCIsInN1Ym1vZGUiOiJvbmxpbmUiLCJjb2xvciI6ImIiLCJtaW4iOjUsImluY3JlbWVudCI6MywiZmVuIjoicm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSJ9.DMIDU7I52Reuz0VNHTXlGn6FLv3dc6KMEZRf9ephh1k\", \"hash\": \"3d5f1b067edae5a59a2a9595e96bde54\" } }","title":"Start a classical game to play online"},{"location":"start/#create-an-invite-code-to-play-a-classical-game","text":"Name Description Required add settings Yes ws.send('/start classical play \"{\\\\\"min\\\\\":5,\\\\\"increment\\\\\":3,\\\\\"color\\\\\":\\\\\"w\\\\\",\\\\\"submode\\\\\":\\\\\"friend\\\\\"}\"'); { \"/start\": { \"variant\": \"classical\", \"mode\": \"play\", \"fen\": \"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq -\", \"jwt\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJjaGVzc2xhYmxhYi5uZXQiLCJpYXQiOjE3MDQ5NjYwNTMsImV4cCI6MTcwNDk2OTY1MywidmFyaWFudCI6ImNsYXNzaWNhbCIsInN1Ym1vZGUiOiJmcmllbmQiLCJjb2xvciI6InciLCJtaW4iOjUsImluY3JlbWVudCI6MywiZmVuIjoicm5icWtibnIvcHBwcHBwcHAvOC84LzgvOC9QUFBQUFBQUC9STkJRS0JOUiB3IEtRa3EgLSJ9._ehztodTLYkyovW82I1qyGdNkFwGFdTKn3O7EBr3cHo\", \"hash\": \"b4f1c0d0b28cad147968729f6bb76558\" } }","title":"Create an invite code to play a classical game"},{"location":"stockfish-eval/","text":"/stockfish_eval Returns Stockfish's evaluation for the given position. Name Description Required fen A FEN string. Yes Usage Example Evaluate C65 \u2014 Ruy Lopez: Berlin Defense. ws.send('/stockfish_eval \"r1bqkb1r/pppp1ppp/2n2n2/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4\"'); { \"/stockfish_eval\": { \"nag\": \"$10\", \"meaning\": \"Equal position\", \"symbol\": \"=\" } }","title":"/stockfish_eval"},{"location":"stockfish-eval/#stockfish_eval","text":"Returns Stockfish's evaluation for the given position. Name Description Required fen A FEN string. Yes","title":"/stockfish_eval"},{"location":"stockfish-eval/#usage","text":"","title":"Usage"},{"location":"stockfish-eval/#example","text":"Evaluate C65 \u2014 Ruy Lopez: Berlin Defense. ws.send('/stockfish_eval \"r1bqkb1r/pppp1ppp/2n2n2/1B2p3/4P3/5N2/PPPP1PPP/RNBQK2R w KQkq - 4 4\"'); { \"/stockfish_eval\": { \"nag\": \"$10\", \"meaning\": \"Equal position\", \"symbol\": \"=\" } }","title":"Example"},{"location":"stockfish/","text":"/stockfish Returns Stockfish's response to the current position. Name Description Required Skill Level The skill level. Yes depth The number of half moves the engine looks ahead. Yes Usage Example Start a classical game, play e2e4 and use Stockfish to respond with a move. ws.send('/start classical stockfish w'); ws.send('/play_lan w e2e4'); ws.send('/stockfish \"{\\\\\"Skill Level\\\\\":20}\" \"{\\\\\"depth\\\\\":12}\"'); { \"/stockfish\": { \"turn\": \"w\", \"pgn\": \"c5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 c5\", \"fen\": \"rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"stockfish\", \"variant\": \"classical\" } }","title":"/stockfish"},{"location":"stockfish/#stockfish","text":"Returns Stockfish's response to the current position. Name Description Required Skill Level The skill level. Yes depth The number of half moves the engine looks ahead. Yes","title":"/stockfish"},{"location":"stockfish/#usage","text":"","title":"Usage"},{"location":"stockfish/#example","text":"Start a classical game, play e2e4 and use Stockfish to respond with a move. ws.send('/start classical stockfish w'); ws.send('/play_lan w e2e4'); ws.send('/stockfish \"{\\\\\"Skill Level\\\\\":20}\" \"{\\\\\"depth\\\\\":12}\"'); { \"/stockfish\": { \"turn\": \"w\", \"pgn\": \"c5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 c5\", \"fen\": \"rnbqkbnr/pp1ppppp/8/2p5/4P3/8/PPPP1PPP/RNBQKBNR w KQkq c6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"stockfish\", \"variant\": \"classical\" } }","title":"Example"},{"location":"takeback/","text":"/takeback Allows to take back a move. Name Description Required action propose decline accept Yes Usage Propose a take back ws.send('/takeback propose'); { \"/takeback\": { \"action\": \"propose\" } } Decline a take back ws.send('/takeback decline'); { \"/takeback\": { \"action\": \"decline\" } } Accept a take back ws.send('/takeback accept'); { \"/takeback\": { \"action\": \"accept\" } }","title":"/takeback"},{"location":"takeback/#takeback","text":"Allows to take back a move. Name Description Required action propose decline accept Yes","title":"/takeback"},{"location":"takeback/#usage","text":"","title":"Usage"},{"location":"takeback/#propose-a-take-back","text":"ws.send('/takeback propose'); { \"/takeback\": { \"action\": \"propose\" } }","title":"Propose a take back"},{"location":"takeback/#decline-a-take-back","text":"ws.send('/takeback decline'); { \"/takeback\": { \"action\": \"decline\" } }","title":"Decline a take back"},{"location":"takeback/#accept-a-take-back","text":"ws.send('/takeback accept'); { \"/takeback\": { \"action\": \"accept\" } }","title":"Accept a take back"},{"location":"undo/","text":"/undo Undoes the last move. Usage Example Starts a classical game to play 1.e4 e5 2.f4 undoing the last move. ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); ws.send('/play_lan b e7e5'); ws.send('/play_lan w f2f4'); ws.send('/undo'); { \"/undo\": { \"turn\": \"w\", \"pgn\": \"e5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 e5\", \"fen\": \"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } }","title":"/undo"},{"location":"undo/#undo","text":"Undoes the last move.","title":"/undo"},{"location":"undo/#usage","text":"","title":"Usage"},{"location":"undo/#example","text":"Starts a classical game to play 1.e4 e5 2.f4 undoing the last move. ws.send('/start classical fen'); ws.send('/play_lan w e2e4'); ws.send('/play_lan b e7e5'); ws.send('/play_lan w f2f4'); ws.send('/undo'); { \"/undo\": { \"turn\": \"w\", \"pgn\": \"e5\", \"castlingAbility\": \"KQkq\", \"movetext\": \"1.e4 e5\", \"fen\": \"rnbqkbnr/pppp1ppp/8/4p3/4P3/8/PPPP1PPP/RNBQKBNR w KQkq e6\", \"isCapture\": false, \"isCheck\": false, \"isMate\": false, \"isStalemate\": false, \"isFivefoldRepetition\": false, \"mode\": \"fen\", \"variant\": \"classical\" } }","title":"Example"}]}